generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

model User {
  id                      String    @id @default(auto()) @map("_id") @db.ObjectId
  email                   String    @unique(map: "email_1")
  forgotPasswordToken     String?
  name                    String
  password                String
  refreshToken            String?
  verify                  Boolean   @default(false)
  verifyEmailToken        String?

  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  // relationships
  favoriteLists           FavoriteList?
  watchLists              WatchList[]   

  @@map("users")
}

model FavoriteList {
  id          String      @id @default(auto()) @map("_id") @db.ObjectId
  userId      String      @db.ObjectId @unique
  movies      String[]    @default([])

  createdAt   DateTime    @default(now()) @map("created_at")
  updatedAt   DateTime    @updatedAt @map("updated_at")

  // relationships
  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("favoritelists")
}

model WatchList {
  id            String      @id @default(auto()) @map("_id") @db.ObjectId
  name          String
  userId        String      @db.ObjectId
  movies        String[]    @default([])

  createdAt     DateTime    @default(now()) @map("created_at")
  updatedAt     DateTime    @updatedAt @map("updated_at")

  // relationships
  user          User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("watchlists")
}
